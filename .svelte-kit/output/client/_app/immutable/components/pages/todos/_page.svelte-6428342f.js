import{Q as K,S as ce,i as de,s as fe,k as y,a as U,q as he,P as _e,l as E,h as k,c as M,m as P,r as pe,n,F as f,b as x,R as W,T as me,d as ve,f as ge,t as be,E as ne,U as ye,V as Ee,W as we,X as Te,Y as le,O as ke,g as Ae,Z as Oe,A as Ue}from"../../../chunks/index-66220184.js";import{c as R}from"../../../chunks/singletons-73fbe142.js";function ie(h){const e=h-1;return e*e*e+1}R.disable_scroll_handling;R.goto;R.invalidate;const ue=R.invalidateAll;R.prefetch;R.prefetch_routes;R.before_navigate;R.after_navigate;const Me=R.apply_action;function X(h,e=()=>{}){const t=async({action:s,result:_})=>{_.type==="success"&&await ue(),location.origin+location.pathname===s.origin+s.pathname&&Me(_)};async function a(s){var b,T;s.preventDefault();const _=new URL((b=s.submitter)!=null&&b.hasAttribute("formaction")?s.submitter.formAction:h.action),p=new FormData(h),i=new AbortController;let u=!1;const l=(T=e({action:_,cancel:()=>u=!0,controller:i,data:p,form:h}))!=null?T:t;if(u)return;let g;try{g=await(await fetch(_,{method:"POST",headers:{accept:"application/json"},body:p,signal:i.signal})).json()}catch(c){if((c==null?void 0:c.name)==="AbortError")return;g={type:"error",error:c}}l({action:_,data:p,form:h,result:g,get type(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get location(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get error(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")}})}return h.addEventListener("submit",a),{destroy(){h.removeEventListener("submit",a)}}}function oe(h,{delay:e=0,duration:t=400,easing:a=ie,start:s=0,opacity:_=0}={}){const p=getComputedStyle(h),i=+p.opacity,u=p.transform==="none"?"":p.transform,m=1-s,l=i*(1-_);return{delay:e,duration:t,easing:a,css:(g,b)=>`
			transform: ${u} scale(${1-m*b});
			opacity: ${i-l*b}
		`}}function Ne(h,{from:e,to:t},a={}){const s=getComputedStyle(h),_=s.transform==="none"?"":s.transform,[p,i]=s.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*p/t.width-(t.left+p),m=e.top+e.height*i/t.height-(t.top+i),{delay:l=0,duration:g=T=>Math.sqrt(T)*120,easing:b=ie}=a;return{delay:l,duration:K(g)?g(Math.sqrt(u*u+m*m)):g,easing:b,css:(T,c)=>{const w=c*u,I=c*m,r=T+c*e.width/t.width,o=T+c*e.height/t.height;return`transform: ${_} translate(${w}px, ${I}px) scale(${r}, ${o});`}}}function se(h,e,t){const a=h.slice();return a[5]=e[t],a[6]=e,a[7]=t,a}function re(h,e){let t,a,s,_,p,i,u,m,l,g,b,T,c,w,I,r,o,d,B,F,D,N,S,j,Y,q,$,H,Z,C,z,G=Ue,O,J,ee;function te(...A){return e[3](e[5],e[6],e[7],...A)}function ae(){return e[4](e[5],e[6],e[7])}return{key:h,first:null,c(){t=y("div"),a=y("form"),s=y("input"),p=U(),i=y("input"),m=U(),l=y("button"),T=U(),c=y("form"),w=y("input"),r=U(),o=y("input"),B=U(),F=y("button"),D=U(),N=y("form"),S=y("input"),Y=U(),q=y("button"),Z=U(),this.h()},l(A){t=E(A,"DIV",{class:!0});var v=P(t);a=E(v,"FORM",{action:!0,method:!0});var L=P(a);s=E(L,"INPUT",{type:!0,name:!0,class:!0}),p=M(L),i=E(L,"INPUT",{type:!0,name:!0,class:!0}),m=M(L),l=E(L,"BUTTON",{class:!0,"aria-label":!0}),P(l).forEach(k),L.forEach(k),T=M(v),c=E(v,"FORM",{class:!0,action:!0,method:!0});var V=P(c);w=E(V,"INPUT",{type:!0,name:!0,class:!0}),r=M(V),o=E(V,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),B=M(V),F=E(V,"BUTTON",{class:!0,"aria-label":!0}),P(F).forEach(k),V.forEach(k),D=M(v),N=E(v,"FORM",{action:!0,method:!0});var Q=P(N);S=E(Q,"INPUT",{type:!0,name:!0,class:!0}),Y=M(Q),q=E(Q,"BUTTON",{class:!0,"aria-label":!0}),P(q).forEach(k),Q.forEach(k),Z=M(v),v.forEach(k),this.h()},h(){n(s,"type","hidden"),n(s,"name","uid"),s.value=_=e[5].uid,n(s,"class","svelte-16nsat"),n(i,"type","hidden"),n(i,"name","done"),i.value=u=e[5].done?"":"true",n(i,"class","svelte-16nsat"),n(l,"class","toggle svelte-16nsat"),n(l,"aria-label",g="Mark todo as "+(e[5].done?"not done":"done")),n(a,"action","/todos?/toggle"),n(a,"method","post"),n(w,"type","hidden"),n(w,"name","uid"),w.value=I=e[5].uid,n(w,"class","svelte-16nsat"),n(o,"aria-label","Edit todo"),n(o,"type","text"),n(o,"name","text"),o.value=d=e[5].text,n(o,"class","svelte-16nsat"),n(F,"class","save svelte-16nsat"),n(F,"aria-label","Save todo"),n(c,"class","text svelte-16nsat"),n(c,"action","/todos?/edit"),n(c,"method","post"),n(S,"type","hidden"),n(S,"name","uid"),S.value=j=e[5].uid,n(S,"class","svelte-16nsat"),n(q,"class","delete svelte-16nsat"),n(q,"aria-label","Delete todo"),q.disabled=$=e[5].pending_delete,n(N,"action","/todos?/delete"),n(N,"method","post"),n(t,"class","todo svelte-16nsat"),ne(t,"done",e[5].done),this.first=t},m(A,v){x(A,t,v),f(t,a),f(a,s),f(a,p),f(a,i),f(a,m),f(a,l),f(t,T),f(t,c),f(c,w),f(c,r),f(c,o),f(c,B),f(c,F),f(t,D),f(t,N),f(N,S),f(N,Y),f(N,q),f(t,Z),O=!0,J||(ee=[W(b=X.call(null,a,te)),W(X.call(null,c)),W(H=X.call(null,N,ae))],J=!0)},p(A,v){e=A,(!O||v&1&&_!==(_=e[5].uid))&&(s.value=_),(!O||v&1&&u!==(u=e[5].done?"":"true"))&&(i.value=u),(!O||v&1&&g!==(g="Mark todo as "+(e[5].done?"not done":"done")))&&n(l,"aria-label",g),b&&K(b.update)&&v&1&&b.update.call(null,te),(!O||v&1&&I!==(I=e[5].uid))&&(w.value=I),(!O||v&1&&d!==(d=e[5].text)&&o.value!==d)&&(o.value=d),(!O||v&1&&j!==(j=e[5].uid))&&(S.value=j),(!O||v&1&&$!==($=e[5].pending_delete))&&(q.disabled=$),H&&K(H.update)&&v&1&&H.update.call(null,ae),(!O||v&1)&&ne(t,"done",e[5].done)},r(){z=t.getBoundingClientRect()},f(){ye(t),G(),Ee(t,z)},a(){G(),G=we(t,z,Ne,{duration:200})},i(A){O||(A&&Te(()=>{C||(C=le(t,oe,{start:.7},!0)),C.run(1)}),O=!0)},o(A){A&&(C||(C=le(t,oe,{start:.7},!1)),C.run(0)),O=!1},d(A){A&&k(t),A&&C&&C.end(),J=!1,ke(ee)}}}function Pe(h){let e,t,a,s,_,p,i,u,m,l=[],g=new Map,b,T,c,w=h[0];const I=r=>r[5].uid;for(let r=0;r<w.length;r+=1){let o=se(h,w,r),d=I(o);g.set(d,l[r]=re(d,o))}return{c(){e=y("meta"),t=U(),a=y("div"),s=y("h1"),_=he("Todos"),p=U(),i=y("form"),u=y("input"),m=U();for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){const o=_e('[data-svelte="svelte-aw2gey"]',document.head);e=E(o,"META",{name:!0,content:!0}),o.forEach(k),t=M(r),a=E(r,"DIV",{class:!0});var d=P(a);s=E(d,"H1",{});var B=P(s);_=pe(B,"Todos"),B.forEach(k),p=M(d),i=E(d,"FORM",{class:!0,action:!0,method:!0});var F=P(i);u=E(F,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),F.forEach(k),m=M(d);for(let D=0;D<l.length;D+=1)l[D].l(d);d.forEach(k),this.h()},h(){document.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(u,"name","text"),n(u,"aria-label","Add todo"),n(u,"placeholder","+ tap to add a todo"),n(u,"class","svelte-16nsat"),n(i,"class","new svelte-16nsat"),n(i,"action","/todos?/add"),n(i,"method","post"),n(a,"class","todos svelte-16nsat")},m(r,o){f(document.head,e),x(r,t,o),x(r,a,o),f(a,s),f(s,_),f(a,p),f(a,i),f(i,u),f(a,m);for(let d=0;d<l.length;d+=1)l[d].m(a,null);b=!0,T||(c=W(X.call(null,i,h[2])),T=!0)},p(r,[o]){if(o&1){w=r[0],Ae();for(let d=0;d<l.length;d+=1)l[d].r();l=me(l,o,I,1,r,w,g,a,Oe,re,null,se);for(let d=0;d<l.length;d+=1)l[d].a();ve()}},i(r){if(!b){for(let o=0;o<w.length;o+=1)ge(l[o]);b=!0}},o(r){for(let o=0;o<l.length;o+=1)be(l[o]);b=!1},d(r){k(e),r&&k(t),r&&k(a);for(let o=0;o<l.length;o+=1)l[o].d();T=!1,c()}}}function Ie(h,e,t){let a,{data:s}=e;const _=()=>({form:u,result:m})=>{m.type==="success"&&(u.reset(),ue())},p=(u,m,l,{data:g})=>{t(0,m[l].done=!!g.get("done"),a)},i=(u,m,l)=>{t(0,m[l].pending_delete=!0,a)};return h.$$set=u=>{"data"in u&&t(1,s=u.data)},h.$$.update=()=>{h.$$.dirty&2&&t(0,a=s.todos)},[a,s,_,p,i]}class Se extends ce{constructor(e){super(),de(this,e,Ie,Pe,fe,{data:1})}}export{Se as default};
