import{I as Z,S as ct,i as dt,s as ft,k as y,a as N,q as ht,H as pt,l as E,h as T,c as U,m as P,r as _t,n as l,F as d,b as x,J as K,K as mt,d as vt,f as gt,t as bt,E as nt,L as yt,M as Et,N as wt,O as kt,P as lt,Q as Tt,g as At,R as Mt,A as Ot}from"../../../chunks/index-10c9c2f9.js";import{c as R}from"../../../chunks/singletons-f83b8586.js";R.disable_scroll_handling;R.goto;R.invalidate;const it=R.invalidateAll;R.prefetch;R.prefetch_routes;R.before_navigate;R.after_navigate;const Nt=R.apply_action;function Q(f,t=()=>{}){const e=async({action:s,result:p})=>{p.type==="success"&&await it(),(location.origin+location.pathname===s.origin+s.pathname||p.type==="redirect"||p.type==="error")&&Nt(p)};async function a(s){var k,h,g,M,r;s.preventDefault();const p=new URL((k=s.submitter)!=null&&k.hasAttribute("formaction")?s.submitter.formAction:f.action),m=new FormData(f),i=(h=s.submitter)==null?void 0:h.getAttribute("name");i&&m.append(i,(M=(g=s.submitter)==null?void 0:g.getAttribute("value"))!=null?M:"");const u=new AbortController;let _=!1;const w=(r=t({action:p,cancel:()=>_=!0,controller:u,data:m,form:f}))!=null?r:e;if(_)return;let b;try{b=await(await fetch(p,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},body:m,signal:u.signal})).json()}catch(n){if((n==null?void 0:n.name)==="AbortError")return;b={type:"error",error:n}}w({action:p,data:m,form:f,result:b,get type(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get location(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get error(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")}})}return f.addEventListener("submit",a),{destroy(){f.removeEventListener("submit",a)}}}function ut(f){const t=f-1;return t*t*t+1}function ot(f,{delay:t=0,duration:e=400,easing:a=ut,start:s=0,opacity:p=0}={}){const m=getComputedStyle(f),i=+m.opacity,u=m.transform==="none"?"":m.transform,_=1-s,o=i*(1-p);return{delay:t,duration:e,easing:a,css:(w,b)=>`
			transform: ${u} scale(${1-_*b});
			opacity: ${i-o*b}
		`}}function Ut(f,{from:t,to:e},a={}){const s=getComputedStyle(f),p=s.transform==="none"?"":s.transform,[m,i]=s.transformOrigin.split(" ").map(parseFloat),u=t.left+t.width*m/e.width-(e.left+m),_=t.top+t.height*i/e.height-(e.top+i),{delay:o=0,duration:w=k=>Math.sqrt(k)*120,easing:b=ut}=a;return{delay:o,duration:Z(w)?w(Math.sqrt(u*u+_*_)):w,easing:b,css:(k,h)=>{const g=h*u,M=h*_,r=k+h*t.width/e.width,n=k+h*t.height/e.height;return`transform: ${p} translate(${g}px, ${M}px) scale(${r}, ${n});`}}}function st(f,t,e){const a=f.slice();return a[5]=t[e],a[6]=t,a[7]=e,a}function rt(f,t){let e,a,s,p,m,i,u,_,o,w,b,k,h,g,M,r,n,c,B,F,D,I,S,H,z,q,V,$,G,C,W,X=Ot,O,Y,tt;function et(...A){return t[3](t[5],t[6],t[7],...A)}function at(){return t[4](t[5],t[6],t[7])}return{key:f,first:null,c(){e=y("div"),a=y("form"),s=y("input"),m=N(),i=y("input"),_=N(),o=y("button"),k=N(),h=y("form"),g=y("input"),r=N(),n=y("input"),B=N(),F=y("button"),D=N(),I=y("form"),S=y("input"),z=N(),q=y("button"),G=N(),this.h()},l(A){e=E(A,"DIV",{class:!0});var v=P(e);a=E(v,"FORM",{action:!0,method:!0});var L=P(a);s=E(L,"INPUT",{type:!0,name:!0,class:!0}),m=U(L),i=E(L,"INPUT",{type:!0,name:!0,class:!0}),_=U(L),o=E(L,"BUTTON",{class:!0,"aria-label":!0}),P(o).forEach(T),L.forEach(T),k=U(v),h=E(v,"FORM",{class:!0,action:!0,method:!0});var j=P(h);g=E(j,"INPUT",{type:!0,name:!0,class:!0}),r=U(j),n=E(j,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),B=U(j),F=E(j,"BUTTON",{class:!0,"aria-label":!0}),P(F).forEach(T),j.forEach(T),D=U(v),I=E(v,"FORM",{action:!0,method:!0});var J=P(I);S=E(J,"INPUT",{type:!0,name:!0,class:!0}),z=U(J),q=E(J,"BUTTON",{class:!0,"aria-label":!0}),P(q).forEach(T),J.forEach(T),G=U(v),v.forEach(T),this.h()},h(){l(s,"type","hidden"),l(s,"name","uid"),s.value=p=t[5].uid,l(s,"class","svelte-16nsat"),l(i,"type","hidden"),l(i,"name","done"),i.value=u=t[5].done?"":"true",l(i,"class","svelte-16nsat"),l(o,"class","toggle svelte-16nsat"),l(o,"aria-label",w="Mark todo as "+(t[5].done?"not done":"done")),l(a,"action","/todos?/toggle"),l(a,"method","post"),l(g,"type","hidden"),l(g,"name","uid"),g.value=M=t[5].uid,l(g,"class","svelte-16nsat"),l(n,"aria-label","Edit todo"),l(n,"type","text"),l(n,"name","text"),n.value=c=t[5].text,l(n,"class","svelte-16nsat"),l(F,"class","save svelte-16nsat"),l(F,"aria-label","Save todo"),l(h,"class","text svelte-16nsat"),l(h,"action","/todos?/edit"),l(h,"method","post"),l(S,"type","hidden"),l(S,"name","uid"),S.value=H=t[5].uid,l(S,"class","svelte-16nsat"),l(q,"class","delete svelte-16nsat"),l(q,"aria-label","Delete todo"),q.disabled=V=t[5].pending_delete,l(I,"action","/todos?/delete"),l(I,"method","post"),l(e,"class","todo svelte-16nsat"),nt(e,"done",t[5].done),this.first=e},m(A,v){x(A,e,v),d(e,a),d(a,s),d(a,m),d(a,i),d(a,_),d(a,o),d(e,k),d(e,h),d(h,g),d(h,r),d(h,n),d(h,B),d(h,F),d(e,D),d(e,I),d(I,S),d(I,z),d(I,q),d(e,G),O=!0,Y||(tt=[K(b=Q.call(null,a,et)),K(Q.call(null,h)),K($=Q.call(null,I,at))],Y=!0)},p(A,v){t=A,(!O||v&1&&p!==(p=t[5].uid))&&(s.value=p),(!O||v&1&&u!==(u=t[5].done?"":"true"))&&(i.value=u),(!O||v&1&&w!==(w="Mark todo as "+(t[5].done?"not done":"done")))&&l(o,"aria-label",w),b&&Z(b.update)&&v&1&&b.update.call(null,et),(!O||v&1&&M!==(M=t[5].uid))&&(g.value=M),(!O||v&1&&c!==(c=t[5].text)&&n.value!==c)&&(n.value=c),(!O||v&1&&H!==(H=t[5].uid))&&(S.value=H),(!O||v&1&&V!==(V=t[5].pending_delete))&&(q.disabled=V),$&&Z($.update)&&v&1&&$.update.call(null,at),(!O||v&1)&&nt(e,"done",t[5].done)},r(){W=e.getBoundingClientRect()},f(){yt(e),X(),Et(e,W)},a(){X(),X=wt(e,W,Ut,{duration:200})},i(A){O||(A&&kt(()=>{C||(C=lt(e,ot,{start:.7},!0)),C.run(1)}),O=!0)},o(A){A&&(C||(C=lt(e,ot,{start:.7},!1)),C.run(0)),O=!1},d(A){A&&T(e),A&&C&&C.end(),Y=!1,Tt(tt)}}}function It(f){let t,e,a,s,p,m,i,u,_,o=[],w=new Map,b,k,h,g=f[0];const M=r=>r[5].uid;for(let r=0;r<g.length;r+=1){let n=st(f,g,r),c=M(n);w.set(c,o[r]=rt(c,n))}return{c(){t=y("meta"),e=N(),a=y("div"),s=y("h1"),p=ht("Todos"),m=N(),i=y("form"),u=y("input"),_=N();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){const n=pt('[data-svelte="svelte-aw2gey"]',document.head);t=E(n,"META",{name:!0,content:!0}),n.forEach(T),e=U(r),a=E(r,"DIV",{class:!0});var c=P(a);s=E(c,"H1",{});var B=P(s);p=_t(B,"Todos"),B.forEach(T),m=U(c),i=E(c,"FORM",{class:!0,action:!0,method:!0});var F=P(i);u=E(F,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),F.forEach(T),_=U(c);for(let D=0;D<o.length;D+=1)o[D].l(c);c.forEach(T),this.h()},h(){document.title="Todos",l(t,"name","description"),l(t,"content","A todo list app"),l(u,"name","text"),l(u,"aria-label","Add todo"),l(u,"placeholder","+ tap to add a todo"),l(u,"class","svelte-16nsat"),l(i,"class","new svelte-16nsat"),l(i,"action","/todos?/add"),l(i,"method","post"),l(a,"class","todos svelte-16nsat")},m(r,n){d(document.head,t),x(r,e,n),x(r,a,n),d(a,s),d(s,p),d(a,m),d(a,i),d(i,u),d(a,_);for(let c=0;c<o.length;c+=1)o[c].m(a,null);b=!0,k||(h=K(Q.call(null,i,f[2])),k=!0)},p(r,[n]){if(n&1){g=r[0],At();for(let c=0;c<o.length;c+=1)o[c].r();o=mt(o,n,M,1,r,g,w,a,Mt,rt,null,st);for(let c=0;c<o.length;c+=1)o[c].a();vt()}},i(r){if(!b){for(let n=0;n<g.length;n+=1)gt(o[n]);b=!0}},o(r){for(let n=0;n<o.length;n+=1)bt(o[n]);b=!1},d(r){T(t),r&&T(e),r&&T(a);for(let n=0;n<o.length;n+=1)o[n].d();k=!1,h()}}}function Pt(f,t,e){let a,{data:s}=t;const p=()=>({form:u,result:_})=>{_.type==="success"&&(u.reset(),it())},m=(u,_,o,{data:w})=>{e(0,_[o].done=!!w.get("done"),a)},i=(u,_,o)=>{e(0,_[o].pending_delete=!0,a)};return f.$$set=u=>{"data"in u&&e(1,s=u.data)},f.$$.update=()=>{f.$$.dirty&2&&e(0,a=s.todos)},[a,s,p,m,i]}class St extends ct{constructor(t){super(),dt(this,t,Pt,It,ft,{data:1})}}export{St as default};
